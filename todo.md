# 智能日报助手 - 项目 TODO

## 核心功能

- [x] 数据库 Schema 设计（对话会话、消息记录、日报、语音文件）
- [x] 后端 tRPC API 实现（会话管理、消息处理、日报 CRUD）
- [x] 前端聊天界面（多轮对话、消息展示）
- [x] 语音录入功能（录音、上传、Whisper 转文字）
- [x] LLM 多轮对话引导（智能提问、补充细节）
- [x] 结构化日报生成（工作内容、完成情况、遇到问题）
- [x] Notion 同步功能（自动同步日报到指定数据库）
- [x] 历史记录管理（查看、编辑历史日报）

## 技术集成

- [x] Whisper API 语音转文字
- [x] LLM 智能对话（使用内置 invokeLLM）
- [x] S3 存储（语音文件、附件）
- [x] Notion API 集成

## UI/UX

- [x] 响应式聊天界面设计
- [x] 语音录制按钮和状态指示
- [x] 日报预览和编辑界面
- [x] 历史日报列表和搜索
- [x] 深色/浅色主题支持

## 新增功能 (v1.1)

- [x] 日报生成页面增加“一键复制”按钮
- [x] 历史日报列表增加筛选功能（按日期范围、同步状态）
- [x] 历史日报列表增加排序功能（按日期、创建时间）

## 功能优化 (v1.2)

- [x] 优化日报访谈引导逻辑，增加业务场景思考和洞察的引导
- [x] 更新日报结构，新增“业务洞察”字段
- [x] 优化 LLM 提示词，引导用户深入思考业务价值

## Bug 修复

- [x] 修复 Notion 同步功能：点击同步后没有数据同步到 Notion

## 新增功能 (v1.3)

- [x] 历史日报列表增加删除按钮
- [x] 修复 Notion 自动同步问题（改用 Notion 官方 API）

- [x] 修复历史日报中点击同步 Notion 报错的问题（支持页面和数据库两种类型）

## OKR 周报功能 (v2.0)

- [x] OKR 数据模型设计（双月周期、Objectives、Key Results）
- [x] OKR 管理后端 API（创建、编辑、查询、归档）
- [x] OKR 管理界面（导入、编辑、查看当前 OKR）
- [x] 日期范围筛选功能（按周、自定义日期范围）
- [x] 日报与 OKR 智能关联算法（LLM 分析）
- [x] 周报生成功能（基于筛选日报和 OKR）
- [x] 周报生成界面（日期选择、OKR 关联展示、周报预览）
- [x] 周报同步到 Notion

## 周报功能增强 (v2.1)

- [x] 创建独立的历史周报页面（侧边栏导航）
- [x] 周报详情页面支持编辑和删除（API 已存在）
- [x] 周报同步到独立的 Notion 数据库（与日报数据库分开）
- [x] 在设置页面添加周报 Notion 数据库 ID 配置

## UI 调整 (v2.2)

- [x] 移除周报生成页面中的历史周报展示部分
- [x] 将产品名称统一修改为“日报周报助手”（所有页面标题、导航栏等）

## Bug 修复 (v2.3)

- [x] 排查并修复周报同步到 Notion 后无法在数据库中查看的问题

## Bug 修复 (v2.4)

- [ ] 修复周报同步到 Notion 显示成功但实际未同步的问题
  - [ ] 添加调试日志确认数据库配置是否正确读取
  - [ ] 验证后端 API 是否正确调用 syncWeeklyReportToNotion
  - [ ] 检查 Notion API 调用是否成功
